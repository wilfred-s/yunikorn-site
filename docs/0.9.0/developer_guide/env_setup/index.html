<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.63">
<title data-react-helmet="true">Dev Environment Setup | Apache YuniKorn (Incubating)</title><meta data-react-helmet="true" name="docsearch:version" content="0.9.0"><meta data-react-helmet="true" property="og:image" content="http://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-react-helmet="true" property="twitter:image" content="http://yunikorn.apache.org/img/logo/yunikorn-logo-main.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Apache YuniKorn (Incubating)"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Dev Environment Setup | Apache YuniKorn (Incubating)"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><meta data-react-helmet="true" property="og:url" content="http://yunikorn.apache.org/docs/0.9.0/developer_guide/env_setup"><link data-react-helmet="true" rel="shortcut icon" href="/img/yunikorn.ico"><link data-react-helmet="true" rel="canonical" href="http://yunikorn.apache.org/docs/0.9.0/developer_guide/env_setup"><link rel="stylesheet" href="/styles.3300edef.css">
<link rel="preload" href="/styles.42927ee7.js" as="script">
<link rel="preload" href="/runtime~main.1daa9f04.js" as="script">
<link rel="preload" href="/main.6222ead5.js" as="script">
<link rel="preload" href="/1.f2f38753.js" as="script">
<link rel="preload" href="/2.05510059.js" as="script">
<link rel="preload" href="/3.a37a1908.js" as="script">
<link rel="preload" href="/1be78505.e1f44db4.js" as="script">
<link rel="preload" href="/146.37105179.js" as="script">
<link rel="preload" href="/9a6d52da.085a8bc2.js" as="script">
<link rel="preload" href="/17896441.6af894f7.js" as="script">
<link rel="preload" href="/c6405911.fe07164f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/yunikorn.ico" alt="YuniKorn Site Logo"><strong class="navbar__title">Apache YuniKorn</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Quick Start</a><a class="navbar__item navbar__link" href="/community/roadmap">Roadmap</a><a class="navbar__item navbar__link" href="/community/download">Download</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/community/get_involved">Get Involved</a></li><li><a class="dropdown__link" position="left" href="/community/how_to_contribute">How to Contribute</a></li><li><a class="dropdown__link" position="left" href="/community/coding_guidelines">Coding Guidelines</a></li><li><a class="dropdown__link" position="left" href="/community/reporting_issues">Reporting Issues</a></li><li><a class="dropdown__link" position="left" href="/community/sessions">Sessions and Demos</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">Apache Software Foundation</a></li><li><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">Apache Incubator</a></li><li><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">Apache License</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">Sponsorship</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/docs/next/">Master</a></li><li><a class="dropdown__link" position="left" href="/docs/">0.10.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" position="left" href="/docs/0.9.0/">0.9.0</a></li><li><a class="dropdown__link" position="left" href="/docs/0.8.0/">0.8.0</a></li></ul></div><a href="https://github.com/apache/incubator-yunikorn-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/yunikorn.ico" alt="YuniKorn Site Logo"><strong class="navbar__title">Apache YuniKorn</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" href="/community/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/community/download">Download</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/community/get_involved">Get Involved</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/community/how_to_contribute">How to Contribute</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/community/coding_guidelines">Coding Guidelines</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/community/reporting_issues">Reporting Issues</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/community/sessions">Sessions and Demos</a></li></ul></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">Apache</a><ul class="menu__list"><li class="menu__list-item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">Apache Software Foundation</a></li><li class="menu__list-item"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">Apache Incubator</a></li><li class="menu__list-item"><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">Apache License</a></li><li class="menu__list-item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">Sponsorship</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" href="/docs">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/docs/next/">Master</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/docs/">0.10.0</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" position="left" href="/docs/0.9.0/">0.9.0</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/docs/0.8.0/">0.8.0</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/apache/incubator-yunikorn-core" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/release-announce/0.9.0/">Release Notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/">Get Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/get_started/core_features">Features</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">User Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/queue_config">Partition and Queue Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/placement_rules">App Placement Rules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/sorting_policies">Sorting Policies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/acls">ACLs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/resource_quota_management">Resource Quota Management</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Workloads</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/workloads/run_spark">Run Spark Jobs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/workloads/run_flink">Run Flink Jobs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/workloads/run_tf">Run Tensorflow Jobs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/api/cluster">Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/api/scheduler">Scheduler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/api/system">System</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/user_guide/trouble_shooting">Trouble Shooting</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Developer Guide</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/0.9.0/developer_guide/env_setup">Dev Environment Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.9.0/developer_guide/build">Build and Run</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.9.0/developer_guide/deployment">Deploy to Kubernetes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Designs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/scheduler_core_design">Scheduler Core Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/k8shim">Kubernetes Shim Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/cross_queue_preemption">Cross Queue Preemption</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/namespace_resource_quota">Namespace Resource Quota</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/pluggable_app_management">Pluggable App Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/resilience">Resilience</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/predicates">Support K8s Predicates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/scheduler_configuration">Scheduler Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/state_aware_scheduling">Batch Workloads Ordering with StateAware Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/design/scheduler_object_states">Scheduler Object States</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Performance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/performance/evaluate_perf_function_with_kubemark">Evaluate YuniKorn function &amp; performance with Kubemark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/performance/metrics">Scheduler Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/0.9.0/performance/profiling">Profiling</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Apache YuniKorn (Incubating) <strong>0.9.0</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/developer_guide/env_setup">latest version</a></strong> (0.10.0).</div></div><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: 0.9.0</span></div><header><h1 class="docTitle_1Lrw">Dev Environment Setup</h1></header><div class="markdown"><p>There are several ways to setup a local development environment for Kubernetes, the two most common ones are <code>Minikube</code> (<a href="https://kubernetes.io/docs/setup/minikube/" target="_blank" rel="noopener noreferrer">docs</a>) and <code>docker-desktop</code>.
<code>Minikube</code> provisions a local Kubernetes cluster on several Virtual Machines (via VirtualBox or something similar). <code>docker-desktop</code> on the other hand, sets up Kubernetes cluster in docker containers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="local-kubernetes-cluster-using-docker-desktop"></a>Local Kubernetes cluster using Docker Desktop<a aria-hidden="true" tabindex="-1" class="hash-link" href="#local-kubernetes-cluster-using-docker-desktop" title="Direct link to heading">#</a></h2><p>In this tutorial, we will base all the installs on Docker Desktop.
Even in this case we can use a lightweight <a href="#local-kubernetes-cluster-with-minikube">minikube</a> setup which gives the same functionality with less impact.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation" title="Direct link to heading">#</a></h3><p>Download and install <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">Docker-Desktop</a> on your laptop. Latest version has an embedded version of Kubernetes so no additional install is needed.
Just simply follow the instruction <a href="https://docs.docker.com/docker-for-mac/#kubernetes" target="_blank" rel="noopener noreferrer">here</a> to get Kubernetes up and running within docker-desktop.</p><p>Once Kubernetes is started in docker desktop, you should see something similar below:</p><p><img alt="Kubernetes in Docker Desktop" src="/assets/images/docker-desktop-7afa28a7972e0e8867bcab8a6a9ac614.png"></p><p>This means that:</p><ol><li>Kubernetes is running.</li><li>the command line tool <code>kubctl</code> is installed in the <code>/usr/local/bin</code> directory.</li><li>the Kubernetes context is set to <code>docker-desktop</code>.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploy-and-access-dashboard"></a>Deploy and access dashboard<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploy-and-access-dashboard" title="Direct link to heading">#</a></h3><p>After setting up the local Kubernetes you need to deploy the dashboard using the following steps: </p><ol><li>follow the instructions in <a href="https://github.com/kubernetes/dashboard" target="_blank" rel="noopener noreferrer">Kubernetes dashboard doc</a> to deploy the dashboard.</li><li>start the Kubernetes proxy in the background from a terminal to get access on the dashboard on the local host:   <div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl proxy </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span></div></div></div></div></div></li><li>access the dashboard at the following URL: <a href="http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/login" target="_blank" rel="noopener noreferrer">clickable link</a></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="access-local-kubernetes-cluster"></a>Access local Kubernetes cluster<a aria-hidden="true" tabindex="-1" class="hash-link" href="#access-local-kubernetes-cluster" title="Direct link to heading">#</a></h3><p>The dashboard as deployed in the previous step requires a token or config to sign in. Here we use the token to sign in. The token is generated automatically and can be retrieved from the system.</p><ol><li>retrieve the name of the dashboard token:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system get secret </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> kubernetes-dashboard-token</span></div></div></div></div></div></li><li>retrieve the content of the token, note that the token name ends with a random 5 character code and needs to be replaced with the result of step 1. As an example:  <div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl -n kube-system describe secret kubernetes-dashboard-token-tf6n8</span></div></div></div></div></div></li><li>copy the token value which is part of the <code>Data</code> section with the tag <code>token</code>.</li><li>select the <strong>Token</strong> option in the dashboard web UI:<br><img alt="Token Access in dashboard" src="/assets/images/dashboard_token_select-a9c66b12d37a247d623e662d642b80be.png"></li><li>paste the token value into the input box and sign in:<br><img alt="Token Access in dashboard" src="/assets/images/dashboard_secret-80e18f88ceb541c0d70bcd1c60176290.png"></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="local-kubernetes-cluster-with-minikube"></a>Local Kubernetes cluster with Minikube<a aria-hidden="true" tabindex="-1" class="hash-link" href="#local-kubernetes-cluster-with-minikube" title="Direct link to heading">#</a></h2><p>Minikube can be added to an existing Docker Desktop install. Minikube can either use the pre-installed hypervisor or use a hypervisor of choice. These instructions use <a href="https://github.com/moby/hyperkit" target="_blank" rel="noopener noreferrer">HyperKit</a> which is embedded in Docker Desktop.   </p><p>If you want to use a different hypervisor then HyperKit make sure that you follow the generic minikube install instructions. Do not forget to install the correct driver for the chosen hypervisor if required.
The basic instructions are provided in the <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/" target="_blank" rel="noopener noreferrer">minikube install</a> instructions.</p><p>Check hypervisor Docker Desktop should have already installed HyperKit. In a terminal run: <code>hyperkit</code> to confirm. Any response other than <code>hyperkit: command not found</code> confirms that HyperKit is installed and on the path. If it is not found you can choose a different hypervisor or fix the Docker Desktop install.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installing-minikube"></a>Installing Minikube<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installing-minikube" title="Direct link to heading">#</a></h3><ol><li>install minikube, you can either use brew or directly via these steps: <div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x minikube</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> minikube /usr/local/bin</span></div></div></div></div></div></li><li>install HyperKit driver (required), you can either use brew or directly via these steps:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -LO https://storage.googleapis.com/minikube/releases/latest/docker-machine-driver-hyperkit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -o root -g wheel -m </span><span class="token number" style="color:rgb(247, 140, 108)">4755</span><span class="token plain"> docker-machine-driver-hyperkit /usr/local/bin/</span></div></div></div></div></div></li><li>update the minikube config to default to the HyperKit install <code>minikube config set vm-driver hyperkit</code></li><li>change docker desktop to use minikube for Kubernetes:<br><img alt="Kubernetes in Docker Desktop: minikube setting" src="/assets/images/docker-dektop-minikube-741c814795983ad6133a5b5b33a2f398.png"></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploy-and-access-the-cluster"></a>Deploy and access the cluster<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploy-and-access-the-cluster" title="Direct link to heading">#</a></h3><p>After the installation is done you can start a new cluster.</p><ol><li>start the minikube cluster: <code>minikube start --kubernetes-version v1.14.2</code></li><li>start the minikube dashboard: <code>minikube dashboard &amp;</code></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="build-impact"></a>Build impact<a aria-hidden="true" tabindex="-1" class="hash-link" href="#build-impact" title="Direct link to heading">#</a></h3><p>When you create images make sure that the build is run after pointing it to the right environment.
Without setting the enviromnent minikube might not find the docker images when deploying the scheduler.</p><ol><li>make sure minikube is started</li><li>in the terminal where you wll run the build execute: <code>eval $(minikube docker-env)</code></li><li>run the image build from the yunikorn-k8shim repository root: <code>make image</code></li><li>deploy the scheduler as per the normal instructions.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debug-code-locally"></a>Debug code locally<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debug-code-locally" title="Direct link to heading">#</a></h2><p>Note, this instruction requires you have GoLand IDE for development.</p><p>In GoLand, go to yunikorn-k8shim project. Then click &quot;Run&quot; -&gt; &quot;Debug...&quot; -&gt; &quot;Edit Configuration...&quot; to get the pop-up configuration window.
Note, you need to click &quot;+&quot; to create a new profile if the <code>Go Build</code> option is not available at the first time.</p><p><img alt="Debug Configuration" src="/assets/images/goland_debug-bf10925ea3e1fdd82cfd32b6f4049678.jpg"></p><p>The highlighted fields are the configurations you need to add. These include:</p><ul><li>Run Kind: package</li><li>Package path: point to the path of <code>pkg/shim</code> package</li><li>Working directory: point to the path of the <code>conf</code> directory, this is where the program loads configuration file from</li><li>Program arguments: specify the arguments to run the program, such as <code>-kubeConfig=/path/to/.kube/config -interval=1s -clusterId=mycluster -clusterVersion=0.1 -name=yunikorn -policyGroup=queues -logEncoding=console -logLevel=-1</code>.
Note, you need to replace <code>/path/to/.kube/config</code> with the local path to the kubeconfig file. And if you want to change or add more options, you can run <code>_output/bin/k8s-yunikorn-scheduler -h</code> to find out.</li></ul><p>Once the changes are done, click &quot;Apply&quot;, then &quot;Debug&quot;. You will need to set proper breakpoints in order to debug the program.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="access-remote-kubernetes-cluster"></a>Access remote Kubernetes cluster<a aria-hidden="true" tabindex="-1" class="hash-link" href="#access-remote-kubernetes-cluster" title="Direct link to heading">#</a></h2><p>This setup assumes you have already installed a remote Kubernetes cluster.
For a generic view on how to access a multiple cluster and integrate it follow the <a href="https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/" target="_blank" rel="noopener noreferrer">accessing multiple clusters</a> documentation from Kubernetes.</p><p>Or follow these simplified steps:</p><ol><li>get the Kubernetes <code>config</code> file from remote cluster, copy it to the local machine and give it a unique name i.e. <code>config-remote</code></li><li>save the <code>KUBECONFIG</code> environment variable (if set)<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">KUBECONFIG_SAVED</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$KUBECONFIG</span></div></div></div></div></div></li><li>add the new file to the environment variable<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-shell codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">KUBECONFIG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$KUBECONFIG</span><span class="token plain">:config-remote</span></div></div></div></div></div></li><li>run the command <code>kubectl config view</code> to check that both configs can be accessed</li><li>switch context using <code>kubectl config use-context my-remote-cluster</code></li><li>confirm that the current context is now switched to the remote cluster config:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl config get-contexts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CURRENT   NAME                   CLUSTER                      AUTHINFO             NAMESPACE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          docker-for-desktop     docker-for-desktop-cluster   docker-for-desktop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*         my-remote-cluster      kubernetes                   kubernetes-admin</span></div></div></div></div></div></li></ol><p>More docs can be found <a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener noreferrer">here</a>  </p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/0.9.0/user_guide/trouble_shooting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Trouble Shooting</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/0.9.0/developer_guide/build"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Build and Run Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#local-kubernetes-cluster-using-docker-desktop" class="table-of-contents__link">Local Kubernetes cluster using Docker Desktop</a><ul><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#deploy-and-access-dashboard" class="table-of-contents__link">Deploy and access dashboard</a></li><li><a href="#access-local-kubernetes-cluster" class="table-of-contents__link">Access local Kubernetes cluster</a></li></ul></li><li><a href="#local-kubernetes-cluster-with-minikube" class="table-of-contents__link">Local Kubernetes cluster with Minikube</a><ul><li><a href="#installing-minikube" class="table-of-contents__link">Installing Minikube</a></li><li><a href="#deploy-and-access-the-cluster" class="table-of-contents__link">Deploy and access the cluster</a></li><li><a href="#build-impact" class="table-of-contents__link">Build impact</a></li></ul></li><li><a href="#debug-code-locally" class="table-of-contents__link">Debug code locally</a></li><li><a href="#access-remote-kubernetes-cluster" class="table-of-contents__link">Access remote Kubernetes cluster</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Blog</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.cloudera.com/yunikorn-a-universal-resources-scheduler/" target="_blank" rel="noopener noreferrer" class="footer__link-item">What&#x27;s YuniKorn?</a></li><li class="footer__item"><a href="https://blog.cloudera.com/apache-yunikorn-incubating-0-8-release-whats-new-and-upcoming/" target="_blank" rel="noopener noreferrer" class="footer__link-item">What&#x27;s new in YuniKorn 0.8.0?</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Github</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-core/" target="_blank" rel="noopener noreferrer" class="footer__link-item">scheduler-core</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-k8shim" target="_blank" rel="noopener noreferrer" class="footer__link-item">kubernetes-shim</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-scheduler-interface" target="_blank" rel="noopener noreferrer" class="footer__link-item">scheduler-interface</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-yunikorn-web" target="_blank" rel="noopener noreferrer" class="footer__link-item">scheduler-web</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community/get_involved">Get Involved</a></li><li class="footer__item"><a href="http://people.apache.org/phonebook.html?podling=yunikorn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roster</a></li><li class="footer__item"><a href="https://issues.apache.org/jira/projects/YUNIKORN/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Issues</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="Apache Incubator Logo" src="https://incubator.apache.org/images/incubator_feather_egg_logo.png"></a></div><div>
Copyright Â© 2021 <a href="http://www.apache.org/">The Apache Software Foundation</a>. Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>. <br>
<div style="padding:20px; margin: 10px; color: #4d4d4d;">
  Apache YuniKorn is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the name of Apache TLP sponsor.
  Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications,
  and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily
  a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
</div>
</div></div></div></footer></div>
<script src="/styles.42927ee7.js"></script>
<script src="/runtime~main.1daa9f04.js"></script>
<script src="/main.6222ead5.js"></script>
<script src="/1.f2f38753.js"></script>
<script src="/2.05510059.js"></script>
<script src="/3.a37a1908.js"></script>
<script src="/1be78505.e1f44db4.js"></script>
<script src="/146.37105179.js"></script>
<script src="/9a6d52da.085a8bc2.js"></script>
<script src="/17896441.6af894f7.js"></script>
<script src="/c6405911.fe07164f.js"></script>
</body>
</html>